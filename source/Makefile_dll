# Project: packLZH DLL
# Makefile created by Matthias Stirner 01/30/2012
# Working with GCC 4.6.0

CC      = gcc
CPP     = g++
RC		= windres -O coff
RM      = del
CFLAGS  = -I. -DBUILD_DLL -O2 -Wall -pedantic -fsched-spec-load -fomit-frame-pointer
LDFLAGS = -Wl,--out-implib,libpackHUF.a -fvisibility=hidden -static-libgcc -static-libstdc++
DEPS    = vliprecalc.h vlicoder.h huffcoder.h lzcoder.h lzhcoder.h bitops.h plzhtbl.h Makefile
OBJ     = vlicoder.o huffcoder.o lzcoder.o lzhcoder.o bitops.o packlzh.o
RES     = icons.res
BIN     = packLZH.dll

%.o: %.cpp $(DEPS)
	$(CPP) -c -o $@ $< $(CFLAGS)

%.res: %.rc
	$(RC) $< $@

$(BIN): $(OBJ) $(RES)
	$(CPP) -shared -o $@ $^ $(LDFLAGS)

clean:
	$(RM) *.o
